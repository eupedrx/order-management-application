<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja - Produtos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <h1>üõí Minha Loja</h1>
        <div class="nav-links">
            <a href="index.html" class="active">Produtos</a>
            <a href="orders.html">Meus Pedidos</a>
            <span class="cart-badge" id="cartCount">0</span>
        </div>
    </nav>

    <main class="container">
        <!-- Filtros -->
        <aside class="filters">
            <h3>Filtros</h3>
            
            <div class="filter-group">
                <label for="searchInput">üîç Buscar</label>
                <input type="text" id="searchInput" placeholder="Nome do produto...">
            </div>

            <div class="filter-group">
                <label>Categorias</label>
                <select id="categoryFilter">
                    <option value="">Todas</option>
                </select>
            </div>

            <div class="filter-group">
                <label class="toggle-label">
                    <input type="checkbox" id="activeToggle" checked>
                    <span>Somente Ativos</span>
                </label>
            </div>
        </aside>

        <!-- Grid de Produtos -->
        <section class="products-section">
            <div id="productsGrid" class="products-grid">
                <p>Carregando produtos...</p>
            </div>
        </section>
    </main>

    <!-- Carrinho Flutuante -->
    <div class="cart-panel" id="cartPanel">
        <div class="cart-header">
            <h3>üõí Carrinho</h3>
            <button class="btn-close" onclick="toggleCart()">‚úï</button>
        </div>
        <div id="cartItems" class="cart-items">
            <p class="empty-cart">Carrinho vazio</p>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <strong>Total:</strong>
                <span id="cartTotal">R$ 0,00</span>
            </div>
            <button class="btn btn-primary" onclick="showCheckoutForm()">Finalizar Pedido</button>
        </div>
    </div>

    <!-- Modal de Checkout -->
    <div id="checkoutModal" class="modal">
    <div class="modal-content">
        <h2>Finalizar Pedido</h2>
        <form id="checkoutForm">
            <div class="order-summary">
                <h3>Resumo do Pedido</h3>
                <p><strong>Total a Pagar:</strong> <span id="checkoutTotal">R$ 0,00</span></p>
            </div>

            <label>ID do Cliente:</label>
            <input type="number" id="customerId" required value="1" min="1">
            
            <label>M√©todo de Pagamento:</label>
            <select id="paymentMethod" required>
                <option value="">Selecione</option>
                <option value="PIX">PIX</option>
                <option value="CARD">Cart√£o de Cr√©dito</option>
                <option value="BOLETO">Boleto</option>
            </select>

            <label>Valor que est√° pagando (R$):</label>
            <input 
                type="number" 
                id="paymentAmount" 
                step="0.01" 
                min="0.01" 
                required
                placeholder="0.00"
            >
            <small id="changeInfo" style="display:none; color: #27ae60; font-weight: bold;">
                Troco: R$ <span id="changeAmount">0,00</span>
            </small>
            <small id="insufficientInfo" style="display:none; color: #e74c3c; font-weight: bold;">
                Valor insuficiente! Faltam R$ <span id="missingAmount">0,00</span>
            </small>

            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeCheckoutModal()">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="confirmOrderBtn">Confirmar Pedido</button>
            </div>
        </form>
        <div id="orderSuccess" class="order-success" style="display:none;">
            <h3>Pedido Realizado!</h3>
            <p>N√∫mero do Pedido: <strong id="orderNumber"></strong></p>
            <p id="changeFinal" style="display:none;">
                <strong>Troco: R$ <span id="changeFinalAmount">0,00</span></strong>
            </p>
            <button class="btn btn-primary" onclick="viewOrders()">Ver Meus Pedidos</button>
        </div>
    </div>
</div>

    <button class="cart-fab" onclick="toggleCart()">
        üõí <span id="fabCount">0</span>
    </button>

    <!-- Scripts -->
    <script src="api.js"></script>
    <script src="app.js"></script>
</body>
</html>
